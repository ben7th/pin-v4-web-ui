<% content_cell :title=>'' do%>
  <%cell_head do%>
    <%= render :partial=>'messages/parts/box_operation_bar',:locals=>{:display_mode=>display_mode} %>
  <%end%>
  <%mplist messages,:for=>Message,:display_mode=>display_mode do |message|%>
    <%= render :partial=>"messages/info_message",:locals=>{:display_mode=>display_mode,:message=>message} %>
  <%end%>
  <%= will_paginate messages,{:position=>:paper} %>
<%end%>

<% content_for :javascripts do %>
  <script type="text/javascript">
    new MplistLiCheckBoxSelect('mplist_messages');
    $("select_all").observe('click',function(){
      MplistLiCheckBoxSelect.select('mplist_messages',true);
    });
    $("cancel_all_select").observe('click',function(){
      MplistLiCheckBoxSelect.select('mplist_messages',false);
    });
    $("select_read").observe('click',function(){
      MplistLiCheckBoxSelect.select('mplist_messages',true,function(li){
        return li.down('div').hasClassName('read')
      });
    });
    $("select_unread").observe('click',function(){
      MplistLiCheckBoxSelect.select('mplist_messages',true,function(li){
        return li.down('div').hasClassName('unread')
      });
    });
  </script>
<% end %>