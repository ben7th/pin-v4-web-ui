(function(a){function m(c){if(a.facebox.settings.inited)return true;else a.facebox.settings.inited=true;a(document).trigger("init.facebox");g();var d=a.facebox.settings.imageTypes.join("|");a.facebox.settings.imageTypesRegexp=RegExp("."+d+"$","i");c&&a.extend(a.facebox.settings,c);a("body").append(a.facebox.settings.faceboxHtml);var h=[new Image,new Image];h[0].src=a.facebox.settings.closeImage;h[1].src=a.facebox.settings.loadingImage;a("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){h.push(new Image);
h.slice(-1).src=a(this).css("background-image").replace(/url\((.+)\)/,"$1")});a("#facebox .close").click(a.facebox.close);a("#facebox .close_image").attr("src",a.facebox.settings.closeImage)}function b(){var c,d;if(self.pageYOffset){d=self.pageYOffset;c=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){d=document.documentElement.scrollTop;c=document.documentElement.scrollLeft}else if(document.body){d=document.body.scrollTop;c=document.body.scrollLeft}return Array(c,
d)}function e(){var c;if(self.innerHeight)c=self.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)c=document.documentElement.clientHeight;else if(document.body)c=document.body.clientHeight;return c}function g(){var c=a.facebox.settings;c.loadingImage=c.loading_image||c.loadingImage;c.closeImage=c.close_image||c.closeImage;c.imageTypes=c.image_types||c.imageTypes;c.faceboxHtml=c.facebox_html||c.faceboxHtml}function k(c,d){if(c.match(/#/)){var h=window.location.href.split("#")[0];
h=c.replace(h,"");a.facebox.reveal(a(h).clone().show(),d)}else c.match(a.facebox.settings.imageTypesRegexp)?i(c,d):j(c,d)}function i(c,d){var h=new Image;h.onload=function(){a.facebox.reveal('<div class="image"><img src="'+h.src+'" /></div>',d)};h.src=c}function j(c,d){a.get(c,function(h){a.facebox.reveal(h,d)})}function f(){return a.facebox.settings.overlay==false||a.facebox.settings.opacity===null}function l(){if(!f()){a("facebox_overlay").length==0&&a("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');
a("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",a.facebox.settings.opacity).click(function(){a(document).trigger("close.facebox")}).fadeIn(200);return false}}function n(){if(!f()){a("#facebox_overlay").fadeOut(200,function(){a("#facebox_overlay").removeClass("facebox_overlayBG");a("#facebox_overlay").addClass("facebox_hide");a("#facebox_overlay").remove()});return false}}a.facebox=function(c,d){a.facebox.loading();if(c.ajax)j(c.ajax);else if(c.image)i(c.image);else if(c.div)k(c.div);
else a.isFunction(c)?c.call(a):a.facebox.reveal(c,d)};a.extend(a.facebox,{settings:{opacity:0.6,overlay:true,loadingImage:"/javascripts/facebox/loading.gif",closeImage:"/javascripts/facebox/closelabel.gif",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody>             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             </tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="content">                 </div>                 <div class="footer">                   <a href="#" class="close">                     <img src="/javascripts/facebox/closelabel.gif" title="close" class="close_image" />                   </a>                 </div>               </td>               <td class="b"/>             </tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             </tr>           </tbody>         </table>       </div>     </div>'},
loading:function(){m();if(a("#facebox .loading").length==1)return true;l();a("#facebox .content").empty();a("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+a.facebox.settings.loadingImage+'"/></div>');a("#facebox").css({top:b()[1]+e()/10,left:385.5}).show();a(document).bind("keydown.facebox",function(c){c.keyCode==27&&a.facebox.close();return true});a(document).trigger("loading.facebox")},reveal:function(c,d){a(document).trigger("beforeReveal.facebox");d&&a("#facebox .content").addClass(d);
a("#facebox .content").append(c);a("#facebox .loading").remove();a("#facebox .body").children().fadeIn("normal");a("#facebox").css("left",a(window).width()/2-a("#facebox table").width()/2);a(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){a(document).trigger("close.facebox");return false}});a.fn.facebox=function(c){m(c);return this.click(function(){a.facebox.loading(true);var d=this.rel.match(/facebox\[?\.(\w+)\]?/);if(d)d=d[1];k(this.href,d);return false})};a(document).bind("close.facebox",
function(){a(document).unbind("keydown.facebox");a("#facebox").fadeOut(function(){a("#facebox .content").removeClass().addClass("content");n();a("#facebox .loading").remove()})})})(jQuery);(function(a){function m(b,e){this.$element=a(b);this.options=e;this.enabled=true;this.fixTitle()}m.prototype={show:function(){var b=this.getTitle();if(b&&this.enabled){var e=this.tip();e.find(".tipsy-inner")[this.options.html?"html":"text"](b);e[0].className="tipsy";e.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);b=a.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var g=e[0].offsetWidth,k=e[0].offsetHeight,
i=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,j;switch(i.charAt(0)){case "n":j={top:b.top+b.height+this.options.offset,left:b.left+b.width/2-g/2};break;case "s":j={top:b.top-k-this.options.offset,left:b.left+b.width/2-g/2};break;case "e":j={top:b.top+b.height/2-k/2,left:b.left-g-this.options.offset};break;case "w":j={top:b.top+b.height/2-k/2,left:b.left+b.width+this.options.offset};break}if(i.length==2)j.left=i.charAt(1)=="w"?b.left+b.width/
2-15:b.left+b.width/2-g+15;e.css(j).addClass("tipsy-"+i);this.options.fade?e.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):e.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove()},fixTitle:function(){var b=this.$element;if(b.attr("title")||typeof b.attr("original-title")!="string")b.attr("original-title",b.attr("title")||"").removeAttr("title")},
getTitle:function(){var b,e=this.$element,g=this.options;this.fixTitle();g=this.options;if(typeof g.title=="string")b=e.attr(g.title=="title"?"original-title":g.title);else if(typeof g.title=="function")b=g.title.call(e[0]);return(b=(""+b).replace(/(^\s*|\s*$)/,""))||g.fallback},tip:function(){if(!this.$tip)this.$tip=a('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();
this.options=this.$element=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};a.fn.tipsy=function(b){function e(f){var l=a.data(f,"tipsy");if(!l){l=new m(f,a.fn.tipsy.elementOptions(f,b));a.data(f,"tipsy",l)}return l}function g(){var f=e(this);f.hoverState="in";if(b.delayIn==0)f.show();else{f.fixTitle();setTimeout(function(){f.hoverState=="in"&&f.show()},b.delayIn)}}function k(){var f=e(this);f.hoverState="out";
b.delayOut==0?f.hide():setTimeout(function(){f.hoverState=="out"&&f.hide()},b.delayOut)}if(b===true)return this.data("tipsy");else if(typeof b=="string"){var i=this.data("tipsy");i&&i[b]();return this}b=a.extend({},a.fn.tipsy.defaults,b);b.live||this.each(function(){e(this)});if(b.trigger!="manual"){i=b.live?"live":"bind";var j=b.trigger=="hover"?"mouseleave":"blur";this[i](b.trigger=="hover"?"mouseenter":"focus",g)[i](j,k)}return this};a.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:false,fallback:"",
gravity:"n",html:false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover"};a.fn.tipsy.elementOptions=function(b,e){return a.metadata?a.extend({},e,a(b).metadata()):e};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"}})(jQuery);
